---
title: "软件架构设计"
date: 2023-11-01T23:00:17+08:00
tags: ["软件架构", "架构师"]
categories: ["编程"]
draft: true

---

## 软件复杂度的表现

复杂性以三种一般方式显现出来，如下段所述。这些表现方式使开发任务变得更加困难：
* 改变放大：复杂性的第一个症状是，一个看似简单的变更需要在许多不同的地方进行代码修改
	* 良好设计的目标之一是减少每个设计决策所影响的代码量，以便设计更改不需要进行很多代码修改
* 认知负担：复杂性的第二个症状是认知负担，它指的是开发人员在完成任务时需要了解多少信息。
	* 更高的认知负担意味着开发人员需要花更多的时间学习所需的信息，并且存在更大的错误风险，因为他们可能会忽略一些重要的事情
* 未知的未知：复杂性的第三个症状是不明显的，不清楚哪些代码片段必须修改以完成任务，或者开发人员必须具备哪些信息才能成功完成任务。

在这三种复杂性的表现中，**未知的未知是最糟糕的**。未知的未知意味着有些事情你需要知道，但没有办法找出是什么，甚至是否存在问题。只有在你做出更改后出现错误时，你才会发现它。改变放大虽然让人烦恼，但只要清楚哪些代码需要修改，一旦更改完成，系统就会正常工作。同样，高认知负担会增加更改的成本，但如果明确了要阅读哪些信息，更改仍然有可能是正确的。对于未知的未知，不清楚该做什么或者提出的解决方案是否有效。唯一确定的方法是阅读系统中的每一行代码，但对于任何规模的系统来说，这是不可能的。甚至这也可能不够，因为更改可能依赖于从未记录的微妙设计决策。

**良好设计的最重要目标之一是使系统变得明显。这与高认知负担和未知的未知相反**。在一个明显的系统中，开发人员可以快速理解现有代码的工作方式以及进行更改所需的内容。明显的系统是一个开发人员可以快速猜测该做什么，而不需要思考很多，同时又能够确信这个猜测是正确的系统。

## 复杂性原因

复杂性是由两个因素引起的：**依赖性**和**模糊性**。

依赖关系是软件的基本组成部分，无法完全消除。事实上，我们在软件设计过程中有意地引入依赖关系。每当您编写一个新类时，都会围绕该类的API创建依赖关系。然而，软件设计的目标之一是减少依赖关系的数量，并使保留下来的依赖关系尽可能简单和明显。

复杂性的第二个原因是模糊性。当重要信息不明显时就会发生模糊性。一个简单的例子是变量名过于通用，没有提供有用的信息。模糊性通常与依赖关系相关联，其中依赖关系不明显。

在许多情况下，模糊性是由于文档不足引起的；第13章涵盖了这个主题。然而，模糊性也是一个设计问题。如果一个系统具有清晰明了的设计，那么它将需要更少的文档。对详细文档的需求通常是设计不太正确的一个警示信号。减少模糊性的最佳方法是简化系统设计


依赖关系和模糊性共同导致了复杂性三种表现形式。依赖关系导致了变更放大和高认知负荷。模糊性产生未知的未知，也增加了认知负荷。如果我们能找到最小化依赖关系和模糊性的设计技巧，那么我们就可以减少软件的复杂性。

复杂性不是由单个灾难性错误引起的；它是由许多小块累积而来的。单个依赖关系或模糊性本身不太可能显著影响软件系统的可维护性。复杂性之所以产生，是因为随着时间的推移，数百甚至数千个小依赖关系和模糊性不断累积。最终，有这么多小问题，以至于对系统的任何可能更改都受到其中几个问题的影响。

复杂性的递增性质使其难以控制。很容易让自己相信，由当前更改引入的一点点复杂性并不是什么大问题。然而，如果每个开发人员对每个更改都采取这种方法，复杂性会迅速累积。一旦复杂性积累起来，要消除它就很困难，因为修复单个依赖关系或模糊性本身不会产生很大的改变。为了减缓复杂性的增长，必须采取“零容忍"哲学"。


